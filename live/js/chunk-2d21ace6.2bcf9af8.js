(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ace6"],{bca0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"card",staticStyle:{background:"#ffffff","border-radius":"10px"}},[a("div",{staticClass:"pl-3 pr-3 pt-2"},[a("div",{},[a("span",{staticClass:"saj-title"},[e._v(" "+e._s(e.$t("Search Filter"))+" ")])]),a("div",{staticClass:"row align-items-end mb-1"},[a("b-col",{staticClass:"mb-md-0",attrs:{cols:"12",md:"4"}},[a("label",{staticClass:"saj-text"},[e._v(e._s(e.$t("Subsidiary"))+":")]),a("v-select",{staticClass:"saj-text select-size-sm",staticStyle:{background:"white"},attrs:{placeholder:e.$t("Choose Subsidiary"),options:e.subList,reduce:function(e){return e.value},label:"text"},model:{value:e.selectedSub,callback:function(t){e.selectedSub=t},expression:"selectedSub"}})],1),a("b-col",{staticClass:"mb-md-0",attrs:{cols:"12",md:"4"}},[a("label",{staticClass:"saj-text"},[e._v(e._s(e.$t("Grade Set"))+":")]),a("v-select",{staticClass:"saj-text select-size-sm",staticStyle:{background:"white"},attrs:{placeholder:e.$t("Choose Grade Set"),options:e.gradesetList,reduce:function(e){return e.value},disabled:null===e.selectedSub,label:"text"},on:{input:function(t){e.selectedType=null}},model:{value:e.selectedGrade,callback:function(t){e.selectedGrade=t},expression:"selectedGrade"}})],1),6===e.selectedGrade||5===e.selectedGrade?a("b-col",{staticClass:"mb-md-0 pt-1",attrs:{cols:"12",md:"4"}},[a("label",{staticClass:"saj-text"},[e._v(e._s(e.$t("Evaluation Type"))+":")]),a("b-form-select",{staticClass:"saj-text",attrs:{id:"icons-search",options:e.evaluationList,size:"sm"},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1):e._e()],1),a("div",{staticClass:"d-flex justify-content-end mt-1 mb-1"},[6===e.selectedGrade||5===e.selectedGrade?a("b-button",{staticClass:"d-flex justify-content-center",attrs:{md:"4",variant:"primary",disabled:null===e.selectedType},on:{click:function(t){return e.searchWeightage()}}},[a("span",{staticClass:"saj-button d-md-none d-lg-block"},[e._v(" "+e._s(e.$t("Search"))+" ")])]):a("b-button",{staticClass:"d-flex justify-content-center",attrs:{md:"4",variant:"primary",disabled:null===e.selectedGrade},on:{click:function(t){return e.searchWeightage()}}},[a("span",{staticClass:"saj-button d-md-none d-lg-block"},[e._v(" "+e._s(e.$t("Search"))+" ")])]),a("b-button",{staticClass:"ml-1",attrs:{md:"4",variant:"primary"},on:{click:function(t){return e.clearSearch()}}},[a("span",{staticClass:"saj-button d-md-none d-lg-block"},[e._v(" "+e._s(e.$t("Clear")))])])],1)])]),e.search?a("weightage",{key:e.refreshGraph,attrs:{"sub-id":e.selectedSub,"grade-set":e.selectedGrade,"eval-type":e.selectedType}}):e._e()],1)},i=[],l=a("b28b"),n=a("8361"),r=a("1947"),c=a("4a7a"),d=a.n(c),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card",staticStyle:{background:"#ffffff","border-radius":"10px"}},[a("div",{staticClass:"card",staticStyle:{background:"#ffffff","border-radius":"10px","overflow-y":"auto"}},[a("div",{staticClass:"pl-3 pr-3 pt-2"},[e.isEdit?a("div",{staticClass:"d-flex justify-content-end mb-1"},[a("b-button",{staticClass:"d-flex justify-content-center",attrs:{md:"4",variant:"primary",disabled:100!=e.totalWeightage},on:{click:function(t){return e.saveWeightage()}}},[a("span",{staticClass:"saj-button d-md-none d-lg-block"},[e._v(" "+e._s(e.$t("Save"))+" ")])]),a("b-button",{staticClass:"ml-1",staticStyle:{"background-color":"rgb(11, 16, 60) !important","border-color":"rgb(11, 16, 60) !important"},attrs:{md:"4"},on:{click:function(t){e.isEdit=!e.isEdit,e.weightageList=e.weightageList}}},[a("span",{staticClass:"saj-button d-md-none d-lg-block"},[e._v(" "+e._s(e.$t("Cancel")))])])],1):a("div",{staticClass:"d-flex justify-content-end mb-1"},[a("b-button",{staticClass:"d-flex justify-content-center",attrs:{md:"4",variant:"primary"},on:{click:function(t){e.isEdit=!e.isEdit}}},[a("span",{staticClass:"saj-button d-md-none d-lg-block"},[e._v(" "+e._s(e.$t("Edit"))+" ")])])],1),a("div",[a("b-table",{attrs:{"sticky-header":"500px",items:e.weightageList,fields:e.weightageField,responsive:"",bordered:"","show-empty":""},scopedSlots:e._u([{key:"head()",fn:function(t){return[a("span",{staticClass:"saj-text d-flex justify-content-center"},[e._v(e._s(e.$t(t.label)))])]}},{key:"cell(index)",fn:function(t){return[a("div",{staticClass:"saj-text d-flex justify-content-center"},[e._v(" "+e._s(t.index+1)+" ")])]}},{key:"cell(result)",fn:function(t){return[a("div",{staticClass:"saj-text d-flex justify-content-center"},[e._v(" "+e._s(e.$t(t.item.result))+" ")])]}},{key:"empty",fn:function(){return[a("h4",{staticStyle:{"text-align":"center","font-style":"italic"}},[e._v(" "+e._s(e.$t("There are no records to show"))+" ")])]},proxy:!0},{key:"cell(weightage)",fn:function(t){return[a("div",{staticClass:"saj-text d-flex justify-content-center"},[a("b-form-input",{staticClass:"d-flex justify-content-center align-items-center saj-title pointer",staticStyle:{color:"black","font-size":"14px",width:"55px","padding-right":"10px","padding-left":"10px",height:"35px","text-align":"center"},attrs:{type:"number",disabled:!e.isEdit,min:"1"},on:{input:function(t){return e.calculateTotal()}},model:{value:e.weightageList[t.index].weightage,callback:function(a){e.$set(e.weightageList[t.index],"weightage",a)},expression:"weightageList[data.index].weightage"}})],1)]}},{key:"custom-foot",fn:function(){return[a("b-tr",[a("b-td",{staticClass:"text-right",attrs:{colspan:"2",variant:""}},[a("b",[e._v(e._s(e.$t("Summary Score")))])]),a("b-td",{staticClass:"text-center d-flex flex-column justify-content-center align-items-center",attrs:{colspan:"1",variant:""}},[a("b-form-input",{staticClass:"d-flex justify-content-center align-items-center saj-title pointer",staticStyle:{color:"black","font-size":"14px",width:"55px","padding-right":"10px","padding-left":"10px",height:"35px","text-align":"center"},attrs:{type:"number",disabled:""},model:{value:e.totalWeightage,callback:function(t){e.totalWeightage=t},expression:"totalWeightage"}}),100!==e.totalWeightage?a("small",{staticClass:"text-danger",staticStyle:{color:"#EA5455 !important"}},[e._v(e._s(e.$t("Total must be 100%"))+" ")]):e._e()],1)],1)]},proxy:!0}])}),a("div",{staticClass:"d-flex justify-content-start align-items-center mt-4 mb-4"},[a("p",{staticClass:"saj-subtitle m-0"},[e._v(" "+e._s(e.$t("Internal / Industrial Involvement Weightage"))+" : ")]),a("b-form-input",{staticClass:"saj-title pointer ml-1",staticStyle:{color:"black","font-size":"14px",width:"55px","padding-right":"10px","padding-left":"10px",height:"35px","text-align":"center"},attrs:{type:"number",disabled:!e.isEdit},model:{value:e.internalWeightage,callback:function(t){e.internalWeightage=t},expression:"internalWeightage"}})],1)],1)])])])},u=[],g=a("29a1"),h=a("2a2e"),p=a("0809"),b=a("4797"),m=a("8f03"),f=a("206d"),y={components:{BTable:g["a"],BTr:h["a"],BTd:p["a"],BButton:r["a"],BFormInput:b["a"]},props:{subId:{type:Number,default:null},gradeSet:{type:Number,default:null},evalType:{type:Number,default:null}},data(){return{weightageField:[{key:"index",label:"No"},{key:"result",label:"Result",class:"text-center",sortDirection:"desc",thClass:"custom-header-color",tdClass:"text-capitalize"},{key:"weightage",label:"Weightage",class:"text-center",sortDirection:"desc",thClass:"custom-header-color",tdClass:"text-capitalize"}],isEdit:!1,required:m["b"],totalWeightage:null,internalWeightage:null,weightageList:[],isNew:!1}},mounted(){this.searchWeightage()},methods:{calculateTotal(){let e=0;this.weightageList.forEach(t=>{e+=Number(t.weightage)}),this.totalWeightage=e},searchWeightage(){const e=new URLSearchParams;e.append("subsidiary_id",this.subId),e.append("role_id",this.gradeSet),this.$axios.get(this.$baseUrl+"/weightage/get_role_percentage",{params:e}).then(e=>{const t=e.data.data;let a=null;if(this.isNew=null===t,a=null===this.evalType?1:this.evalType,null!==t){const e=[{result:0===a?"Overall Assessment":"Key Result Area",key:0===a?"overall_assesment":"key_result_area",weightage:0===a?t.overall_assesment:t.key_result_area},{result:"Core Competencies",key:"core_competency",weightage:t.core_competency},{result:"Behavioural Competencies",key:"behavioural_competency",weightage:t.behavioural_competency}];let s=null;s=1===this.gradeSet||2===this.gradeSet?[{result:"Training",key:"training",weightage:t.training},{result:"Self Learning",key:"self_learning",weightage:t.self_learning}]:[{result:"Training and Development",key:"training",weightage:t.training}],this.weightageList=e.concat(s),this.internalWeightage=t.internal_industry_involement}else{const e=[{result:0===a?"Overall Assessment":"Key Result Area",key:0===a?"overall_assesment":"key_result_area",weightage:0},{result:"Core Competencies",key:"core_competency",weightage:0},{result:"Behavioural Competencies",key:"behavioural_competency",weightage:0}];let t=null;t=1===this.gradeSet||2===this.gradeSet?[{result:"Training",key:"training",weightage:0},{result:"Self Learning",key:"self_learning",weightage:0}]:[{result:"Training and Development",key:"training",weightage:0}],this.weightageList=e.concat(t),this.internalWeightage=0}this.calculateTotal()})},saveWeightage(){const e=new FormData;this.weightageList.forEach(t=>{e.append(t.key,t.weightage)}),e.append("subsidiary_id",this.subId),e.append("role_id",this.gradeSet),e.append("internal_industry_involement",this.internalWeightage);let t=null;t=null===this.evalType?1:this.evalType,1===t?e.append("overall_assesment",0):e.append("key_result_area",0),3!==this.gradeSet&&4!==this.gradeSet&&5!==this.gradeSet&&6!==this.gradeSet||e.append("self_learning",0);let a=null;a=this.isNew?"/weightage/add_percentage":"/weightage/update_percentage",this.$axios.post(`${this.$baseUrl}${a}`,e).then(()=>{this.reload(),this.$toast({component:f["a"],props:{title:this.$t("Successfully Updated")+".",icon:"CheckCircleIcon",variant:"success",titleColor:"#000"}},{position:"top-right",type:"info"}),this.isEdit=!1,this.isNew&&(this.isNew=!1)})},reload(){this.$emit("reload")}}},v=y,x=a("2877"),_=Object(x["a"])(v,o,u,!1,null,null,null),C=_.exports,w={components:{vSelect:d.a,BCol:l["a"],BFormSelect:n["a"],BButton:r["a"],weightage:C},props:{},data(){return{selectedSub:null,subList:[],gradesetList:[],selectedGrade:null,selectedType:null,evaluationList:[{text:""+this.$i18n.t("Choose Evaluation Type"),value:null,disabled:!0},{text:""+this.$i18n.t("KRA"),value:1},{text:""+this.$i18n.t("JD"),value:0}],search:!1,refreshGraph:0}},watch:{},mounted(){this.getSubsidiary(),this.getGradeSet()},methods:{getSubsidiary(){this.$axios.get(this.$baseUrl+"/subsidiary/getAll").then(e=>{this.allbusinessUnit=e.data.data.subsidiaries,this.subList=this.allbusinessUnit.map(e=>({text:e.subsidiary_name,value:e.id}))})},getGradeSet(){this.$axios.get(this.$baseUrl+"/gradeSet/get_all").then(e=>{const t=e.data.data;this.gradesetList=t.map(e=>({text:e.name,value:e.id}))})},searchWeightage(){this.search&&(this.search=!1),this.search=!0,this.refreshGraph+=1},clearSearch(){this.selectedSub=null,this.selectedGrade=null,this.selectedType=null,this.search=!1}}},k=w,S=Object(x["a"])(k,s,i,!1,null,null,null);t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d21ace6.2bcf9af8.js.map